<!-- Show loading component during authentication -->
<app-loading *ngIf="isAuthenticating"></app-loading>

<div class="app-container" [class.blur]="isAuthenticating">
  <header class="main-header">
    <div class="header-content">
      <div class="nav-brand">
        <h1>MSAL Example</h1>
      </div>
      
      <nav class="main-nav">
        <div class="nav-links">
          <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
            <i class="nav-icon home-icon"></i>
            <span>Home</span>
          </a>
          <a routerLink="/admin" routerLinkActive="active">
            <i class="nav-icon admin-icon"></i>
            <span>Admin</span>
          </a>
        </div>
      </nav>
      
      <div class="auth-section">
        <button *ngIf="!isLoggedIn" (click)="login()" [disabled]="loginInProgress" class="btn login-button">
          <i class="btn-icon login-icon"></i>
          <span *ngIf="!loginInProgress">Login</span>
          <span *ngIf="loginInProgress" class="spinner-text">
            <span class="spinner"></span> Logging in...
          </span>
        </button>
        
        <div *ngIf="isLoggedIn" class="user-dropdown">
          <div class="user-avatar" *ngIf="userInfo" (click)="toggleDropdown($event)">
            {{ userInfo.displayName?.charAt(0) || 'U' }}
          </div>
          <div class="dropdown-content" [class.show-dropdown]="isDropdownOpen" (click)="$event.stopPropagation()">
            <div class="dropdown-user-info">
              <p class="user-name">{{ userInfo?.displayName }}</p>
              <p class="user-email">{{ userInfo?.email }}</p>
            </div>
            <div class="dropdown-divider"></div>
            <button (click)="logout()" [disabled]="loginInProgress" class="btn logout-button">
              <i class="btn-icon logout-icon"></i>
              <span *ngIf="!loginInProgress">Logout</span>
              <span *ngIf="loginInProgress" class="spinner-text">
                <span class="spinner"></span> Logging out...
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="content-area">
    <router-outlet></router-outlet>
  </main>
</div>